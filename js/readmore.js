/*!
 *  @preserve
 * 
 * Readmore.js plugin
 * Author: @jed_foster
 * Project home: jedfoster.com/Readmore.js
 * Version: 3.0.0-beta-1
 * Licensed under the MIT license
 * 
 * Debounce function from davidwalsh.name/javascript-debounce-function
 */

!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Readmore",[],t):"object"==typeof exports?exports.Readmore=t():e.Readmore=t()}(window,function(){return function(o){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=o,r.c=n,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}({"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"./node_modules/@babel/runtime/helpers/createClass.js":function(e,t){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}},"./node_modules/@babel/runtime/helpers/typeof.js":function(t,e){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return"function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?t.exports=n=function(e){return o(e)}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)},n(e)}t.exports=n},"./src/readmore.js":function(e,t,o){"use strict";o.r(t);var n=o("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=o.n(n),r=o("./node_modules/@babel/runtime/helpers/createClass.js"),i=o.n(r),a=o("./node_modules/@babel/runtime/helpers/typeof.js"),d=o.n(a),l=0,c=[];function u(e,t,o){for(var n=0;n<e.length;n+=1)t.call(o,e[n],n)}function f(){return"rmjs-".concat(l+=1)}function p(e){e.style.height="auto";var t=parseInt(e.getBoundingClientRect().height,10),o=parseInt(window.getComputedStyle(e).maxHeight,10),n=parseInt(e.readmore.defaultHeight,10);e.readmore.expandedHeight=t,e.readmore.maxHeight=o,e.readmore.collapsedHeight=o||e.readmore.collapsedHeight||n,e.style.maxHeight="none"}function m(e,t){if(!c[e]){var o="";t.embedCSS&&""!==t.blockCSS&&(o+="".concat(e," + [data-readmore-toggle], ").concat(e,"[data-readmore] {\n        ").concat(t.blockCSS,"\n      }")),o+="".concat(e,"[data-readmore] {\n      transition: height ").concat(t.speed,"ms;\n      overflow: hidden;\n    }"),n=document,r=o,(i=n.createElement("style")).type="text/css",i.styleSheet?i.styleSheet.cssText=r:i.appendChild(n.createTextNode(r)),n.getElementsByTagName("head")[0].appendChild(i),c[e]=!0}var n,r,i}function h(e,t,o){var n=e;"function"==typeof e&&(n=e(t));var r,i,a=(r=n,(i=document.createElement("div")).innerHTML=r,i.firstChild);return a.setAttribute("data-readmore-toggle",t.id),a.setAttribute("aria-controls",t.id),a.addEventListener("click",function(e){this.toggle(t,e)}.bind(o)),a}[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){Object.prototype.hasOwnProperty.call(e,"remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})});var y,g,b,v,S=(y=function(){u(document.querySelectorAll("[data-readmore]"),function(e){var t="true"===e.getAttribute("aria-expanded");p(e),e.style.height="".concat(t?e.readmore.expandedHeight:e.readmore.collapsedHeight,"px")})},g=100,function(){for(var e=this,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];var r=b&&!v;clearTimeout(v),v=setTimeout(function(){v=null,b||y.apply(e,o)},g),r&&y.apply(this,o)}),x={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,sourceOrder:"after",blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},j=function(){function l(){var r=this;if(s()(this,l),"undefined"!=typeof window&&"undefined"!=typeof document&&document.querySelectorAll&&window.addEventListener){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var n,i=t[0],a=t[1];(n="string"==typeof i?document.querySelectorAll(i):i.nodeName?[i]:i).length&&(this.options=function t(){for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];var r={}.hasOwnProperty,i=o[0],a=o[1];if(2<o.length){var l=[];for(Object.keys(o).forEach(function(e){l.push(o[e])});2<l.length;){var s=l.shift(),c=l.shift();l.unshift(t(s,c))}i=l.shift(),a=l.shift()}return a&&Object.keys(a).forEach(function(e){r.call(a,e)&&("object"===d()(a[e])?(i[e]=i[e]||{},i[e]=t(i[e],a[e])):i[e]=a[e])}),i}({},x,a),"string"==typeof i?m(i,this.options):(this.instanceSelector=".".concat(f()),m(this.instanceSelector,this.options)),window.addEventListener("load",S),window.addEventListener("resize",S),this.elements=[],u(n,function(e){r.instanceSelector&&e.classList.add(r.instanceSelector.substr(1));var t=r.options.startOpen;e.readmore={defaultHeight:r.options.collapsedHeight,heightMargin:r.options.heightMargin},p(e);var o=e.readmore.heightMargin;if(e.getBoundingClientRect().height<=e.readmore.collapsedHeight+o)"function"==typeof r.options.blockProcessed&&r.options.blockProcessed(e,!1);else{e.setAttribute("data-readmore",""),e.setAttribute("aria-expanded",t),e.id=e.id||f();var n=h(t?r.options.lessLink:r.options.moreLink,e,r);e.parentNode.insertBefore(n,"before"===r.options.sourceOrder?e:e.nextSibling),e.style.height="".concat(t?e.readmore.expandedHeight:e.readmore.collapsedHeight,"px"),"function"==typeof r.options.blockProcessed&&r.options.blockProcessed(e,!0),r.elements.push(e)}}))}}return i()(l,[{key:"toggle",value:function(){var a=this,e=arguments.length<=0?void 0:arguments[0],t=function(o){var n=document.querySelector('[aria-controls="'.concat(o.id,'"]')),r=o.getBoundingClientRect().height<=o.readmore.collapsedHeight,e=r?o.readmore.expandedHeight:o.readmore.collapsedHeight;if("function"==typeof a.options.beforeToggle&&!1===a.options.beforeToggle(n,o,!r))return;o.style.height="".concat(e,"px");var t=function e(t){"function"==typeof a.options.afterToggle&&a.options.afterToggle(n,o,r),t.stopPropagation(),o.setAttribute("aria-expanded",r),o.removeEventListener("transitionend",e,!1)};o.addEventListener("transitionend",t,!1),a.options.speed<1&&t.call(a,{target:o});var i=r?a.options.lessLink:a.options.moreLink;i?n&&n.parentNode&&n.parentNode.replaceChild(h(i,o,a),n):n.remove()};if("string"==typeof e&&(e=document.querySelectorAll(e)),!e)throw new Error("Element MUST be either an HTML node or querySelector string");var o=arguments.length<=1?void 0:arguments[1];o&&(o.preventDefault(),o.stopPropagation()),"object"!==d()(e)||e.nodeName?t(e):u(e,t)}},{key:"destroy",value:function(e){var o=this;u(e?"string"==typeof e?document.querySelectorAll(e):e.nodeName?[e]:e:this.elements,function(t){if(-1!==o.elements.indexOf(t)){o.elements=o.elements.filter(function(e){return e!==t}),o.instanceSelector&&t.classList.remove(o.instanceSelector.substr(1)),delete t.readmore,t.style.height="initial",t.style.maxHeight="initial",t.removeAttribute("data-readmore"),t.removeAttribute("aria-expanded");var e=document.querySelector('[aria-controls="'.concat(t.id,'"]'));e&&e.remove(),-1!==t.id.indexOf("rmjs-")&&t.removeAttribute("id")}})}}]),l}();j.VERSION="3.0.0-beta-1",t.default=j},0:function(e,t,o){e.exports=o("./src/readmore.js")}}).default});

